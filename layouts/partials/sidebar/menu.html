<nav>
    <ul class="sidebar-nav">
        {{ range .Site.Params.menu }}
        {{ $menu_item := . }}

        {{/* Handle heading-only items (no URL) */}}
        {{ if eq (len $menu_item.URL) 0 }}
            <li class="heading">{{ $menu_item.Name }}</li>

        {{/* Handle external links */}}
        {{ else if $menu_item.External }}
            <li class="bullet">
                <a href="{{ $menu_item.URL }}" target="_blank" rel="noopener noreferrer">{{ $menu_item.Name }}</a>
            </li>

        {{/* Handle internal links */}}
        {{ else }}
            {{/* Find the content page for this menu item */}}
            {{ $page := $.Site.GetPage $menu_item.URL }}

            {{/* Render the menu item heading */}}
            <li class="heading">
                <a href="{{ $menu_item.URL }}">{{ $menu_item.Name }}</a>
            </li>

            {{/* Render children if HasChildren is true and we found the page */}}
            {{ if and $menu_item.HasChildren $page }}
                {{ if $menu_item.Pre }}
                <li class="sub-heading">
                    {{ $menu_item.Pre }}
                </li>
                {{ end }}
                {{ range (first $menu_item.Limit $page.Pages) }}
                <li class="bullet">
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                </li>
                {{ end }}
            {{ end }}
        {{ end }}
        {{ end }}
    </ul>
</nav>